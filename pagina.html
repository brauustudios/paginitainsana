<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PÃ¡gina Especial para Ti</title>

  <!-- Fallback pixel font desde Google (Press Start 2P) -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg1: #fff0f6;
      --bg2: #ffd7eb;
      --accent: #ff3b8d;
      --soft: rgba(255, 255, 255, 0.6);
      --glass: rgba(255, 255, 255, 0.18);
      --shadow: 0 10px 30px rgba(255, 60, 130, 0.12);
      --radius: 18px;
      --ui-pad: 14px;
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: "Press Start 2P", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: radial-gradient(1200px 800px at 10% 10%, #fff0f6 0%, transparent 30%), linear-gradient(180deg, var(--bg1), var(--bg2));
      color: #2a2530;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }

    /* Layout */
    .wrap {
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 24px;
      gap: 18px;
    }

    .card {
      width: min(960px, 96%);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.75));
      border-radius: calc(var(--radius) + 6px);
      padding: clamp(16px, 3.5vw, 26px);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 20, 90, 0.06);
      position: relative;
      overflow: visible;
    }

    /* Header / title */
    .title-row {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: space-between
    }

    h1 {
      font-size: clamp(20px, 5vw, 34px);
      margin: 0;
      color: var(--accent);
      letter-spacing: .02em;
      display: flex;
      align-items: center;
      gap: .6rem;
      transform-origin: center;
      animation: titlePop .9s ease;
      text-shadow: 0 6px 18px rgba(255, 80, 150, 0.12);
    }

    @keyframes titlePop {
      from {
        transform: scale(.96);
        opacity: 0
      }

      to {
        transform: scale(1);
        opacity: 1
      }
    }

    .sub {
      color: #6e6170;
      font-weight: 700;
      font-size: 12px;
    }

    /* Player and controls */
    .player {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 12px;
      align-items: center;
      margin-top: 12px;
    }

    .play-card {
      background: var(--glass);
      padding: 10px;
      border-radius: 14px;
      display: flex;
      gap: 12px;
      align-items: center;
      box-shadow: 0 8px 18px rgba(255, 50, 130, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.35);
    }

    .big-btn {
      background: linear-gradient(180deg, #ff8ab8, #ff4d94);
      color: white;
      border: 0;
      padding: 10px 12px;
      border-radius: 12px;
      font-weight: 800;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(255, 60, 140, 0.18);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
    }

    .big-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 60, 140, 0.25);
    }

    .big-btn:active {
      transform: translateY(1px) scale(.995)
    }

    .seek {
      width: 220px;
      appearance: none;
      height: 10px;
      border-radius: 999px;
      background: linear-gradient(90deg, #ffd3ea, #ff9fd4);
      border: 1px solid rgba(255, 255, 255, 0.6);
      cursor: pointer;
    }

    .seek::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: white;
      border: 3px solid var(--accent);
      box-shadow: 0 4px 12px rgba(255, 60, 130, 0.25);
      cursor: pointer;
    }

    /* Mini game panel */
    .game-panel {
      margin-top: 16px;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .game-card {
      flex: 1;
      min-width: 200px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.45), rgba(255, 255, 255, 0.22));
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.35);
    }

    .score {
      font-size: 18px;
      font-weight: 900;
      color: var(--accent)
    }

    .small {
      font-size: 12px;
      color: #7b6e78;
      font-weight: 700
    }

    /* Game viewport (where hearts fall) */
    .game-viewport {
      width: 100%;
      height: 340px;
      border-radius: 12px;
      overflow: hidden;
      position: relative;
      background: linear-gradient(180deg, rgba(255, 230, 240, 0.9), rgba(255, 240, 246, 0.7));
      border: 1px dashed rgba(255, 50, 120, 0.06);
      margin-top: 12px;
      -webkit-tap-highlight-color: transparent;
    }

    .hud-row {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .pixel-heart {
      width: 22px;
      height: 22px;
      display: inline-block;
      filter: drop-shadow(0 6px 18px rgba(255, 90, 160, 0.12));
      transform: translateY(0);
      animation: heartLift 3s ease-in-out infinite;
    }

    .pixel-heart:nth-child(2) {
      animation-delay: .4s
    }

    .pixel-heart:nth-child(3) {
      animation-delay: .8s
    }

    @keyframes heartLift {
      0% {
        transform: translateY(0) scale(.98)
      }

      50% {
        transform: translateY(-6px) scale(1.03)
      }

      100% {
        transform: translateY(0) scale(.98)
      }
    }

    /* Footer */
    footer {
      width: 100%;
      text-align: center;
      color: #856f80;
      font-weight: 700;
      font-size: 12px;
      margin-top: 12px
    }

    /* Mobile tweaks */
    @media (max-width: 768px) {
      .player {
        grid-template-columns: 1fr;
        align-items: center
      }

      .seek {
        width: 100%
      }

      .game-viewport {
        height: 280px
      }

      .wrap {
        padding: 14px
      }
      
      .title-row {
        justify-content: center;
        text-align: center;
      }
      
      .game-panel {
        flex-direction: column;
      }
      
      .game-card {
        width: 100%;
      }
      
      h1 {
        font-size: 24px;
      }
      
      .sub {
        font-size: 10px;
      }
    }
    
    @media (max-width: 520px) {
      .game-viewport {
        height: 220px
      }
      
      h1 {
        font-size: 20px;
      }
      
      .big-btn {
        padding: 8px 10px;
        font-size: 12px;
      }
    }

    /* little confetti when win */
    .confetti {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: visible;
    }

    /* subtle vignette */
    .vignette {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.04) 100%)
    }
    
    /* Floating hearts background */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .floating-heart {
      position: absolute;
      width: 24px;
      height: 24px;
      opacity: 0.5;
      animation: float 15s infinite linear;
    }
    
    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0.7;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }
    
    /* Audio error message */
    .audio-error {
      display: none;
      background: rgba(255, 200, 200, 0.8);
      border-radius: 8px;
      padding: 8px 12px;
      margin-top: 8px;
      font-size: 10px;
      color: #d32f2f;
    }
    
    /* Secret message */
    .secret-message {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.9);
      padding: 10px 15px;
      border-radius: 20px;
      font-size: 11px;
      color: #ff3b8d;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transition: opacity 0.5s;
      z-index: 1000;
      text-align: center;
      max-width: 90%;
    }
    
    /* Bubble de notas */
    .note-bubble {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 160px;
      min-height: 40px;
      max-height: 200px;
      background: rgba(255, 223, 235, 0.85);
      border: 2px dashed #ff3b8d;
      border-radius: 16px;
      padding: 8px;
      font-family: 'Press Start 2P', monospace;
      font-size: 11px;
      color: #2a2530;
      overflow-y: auto;
      box-shadow: 0 6px 18px rgba(255, 50, 130, 0.2);
      z-index: 9999;
      cursor: grab;
      line-height: 1.2;
    }
    
    @media (max-width: 768px) {
      .note-bubble {
        right: 10px;
        bottom: 10px;
        width: 140px;
        font-size: 10px;
      }
    }
  </style>
</head>

<body>
  <!-- Burbuja decorativa -->
  <div class="note-bubble" id="noteBubble">
    ðŸ’Œ pondre notitas cada dia aquÃ­ :3
  </div>

  <!-- Floating hearts background -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <div class="vignette"></div>

  <div class="wrap">
    <div class="card" role="region" aria-label="Dedicado">
      <div class="title-row">
        <div style="display:flex;align-items:center;gap:12px">
          <h1>
            <img src="https://art.pixilart.com/2d2ed65cc301.png" width="28" height="28" style="margin-right:6px">
           PAGINITA PARA TI 
          </h1>

          <div class="hud-row small">
            <!-- decorative pixel hearts -->
            <img class="pixel-heart" src="https://art.pixilart.com/2d2ed65cc301.png" width="22" height="22" alt="CorazÃ³n">
            <img class="pixel-heart" src="https://art.pixilart.com/2d2ed65cc301.png" width="22" height="22" alt="CorazÃ³n">
            <img class="pixel-heart" src="https://art.pixilart.com/2d2ed65cc301.png" width="22" height="22" alt="CorazÃ³n">
          </div>
        </div>

        <div style="display:flex;gap:10px;align-items:center">
          <div class="sub">oh Â· my Â· oh Â· what Â· Girl</div>
          <button class="big-btn" id="shareBtn" aria-label="Compartir">ðŸ’Œ Compartir</button>
        </div>
      </div>

      <!-- Player -->
      <div class="player" style="margin-top:10px">
        <div class="play-card" style="flex:1">
          <div style="display:flex;flex-direction:column;gap:6px;flex:1">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
              <div style="display:flex;flex-direction:column">
                <strong style="color:var(--accent);font-size:14px">My Kind of Woman</strong>
                <span class="small">Mac DeMarco</span>
              </div>
              <div style="display:flex;gap:8px;align-items:center">
                <button class="big-btn" id="playToggle">â–¶</button>
              </div>
            </div>

            <!-- native audio hidden, we control it -->
            <audio id="audio" preload="metadata">
              <source src="mykindofwoman.mp3" type="audio/mpeg">
              Tu navegador no soporta audio.
            </audio>
            
            <div class="audio-error" id="audioError">
              No se pudo cargar el audio. AsegÃºrate de que el archivo "mykindofwoman.mp3" estÃ© en la misma carpeta.
            </div>

            <input type="range" id="seek" class="seek" min="0" step="0.1" value="0" aria-label="barra de progreso">
          </div>

          <div style="width:160px;display:flex;flex-direction:column;align-items:flex-end">
            <div style="font-weight:900;color:#7b6374">Ola reproduce esto</div>
            <div class="small" style="margin-top:6px">Toca la pantalla para crear corazones</div>
          </div>
        </div>

        <!-- side small panel -->
        <div style="width:220px;display:flex;flex-direction:column;gap:8px">
          <div class="game-card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div class="small">Juego</div>
              <div class="score" id="score">0</div>
            </div>
            <div style="margin-top:8px;font-size:12px;color:#6b5866">Atrapa corazones tocÃ¡ndolos DuraciÃ³n 25s, saca tu mejor puntuacion aca de chill</div>
            <div style="display:flex;gap:8px;margin-top:12px">
              <button class="big-btn" id="startGame" style="padding:8px 10px;font-size:12px">Jugar</button>
              <button class="big-btn" id="resetGame"
                style="padding:8px 10px;font-size:12px;background:linear-gradient(180deg,#fff,#ffd7ec);color:var(--accent)">Reset</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Game viewport -->
      <div class="game-panel">
        <div class="game-card" style="flex:1">
          <div id="viewport" class="game-viewport" aria-label="Ãrea de juego tÃ¡ctil">
            <!-- falling hearts inserted here -->
          </div>
        </div>

        <div class="game-card" style="width:220px">
          <div style="font-weight:900;color:var(--accent);font-size:18px">Logros</div>
          <div style="margin-top:8px" id="achievements">
            <div class="small">â€” Toca para crear corazoncitos</div>
            <div class="small">â€” Aumenta la dificultad si llegas a 15 pts</div>
          </div>
        </div>
      </div>

      <div style="display:flex;gap:8px;align-items:center;margin-top:12px">
        <button class="big-btn" id="moreHearts">ðŸ’— +Hacer llovear corazones</button>
        <button class="big-btn" id="miniConfetti"
          style="background:linear-gradient(180deg,#fff,#ffe6f2);color:var(--accent)"> Celebrar</button>
      </div>

      <div class="confetti" id="confetti"></div>
    </div>

    <footer>
      Hecho por el tonto de braw para emogato
      <p style="font-size: 5px; color: gray; margin-top: 30px;">
        (Powered By BrauuStudiosSC)
      </p>
    </footer>

  </div>

  <!-- Secret message -->
  <div class="secret-message" id="secretMessage"></div>

  <!-- Optional small vignette overlay -->
  <div class="vignette" aria-hidden="true"></div>

  <script>
    // Inicializar corazones flotantes de fondo
    function initFloatingHearts() {
      const container = document.getElementById('floatingHearts');
      for (let i = 0; i < 15; i++) {
        const heart = document.createElement('img');
        heart.src = 'https://art.pixilart.com/2d2ed65cc301.png';
        heart.className = 'floating-heart';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDelay = Math.random() * 15 + 's';
        heart.style.animationDuration = (15 + Math.random() * 10) + 's';
        heart.style.width = '24px';
        heart.style.height = '24px';
        container.appendChild(heart);
      }
    }
    
    // Basic player controls
    const audio = document.getElementById('audio');
    const playToggle = document.getElementById('playToggle');
    const seek = document.getElementById('seek');
    const audioError = document.getElementById('audioError');

    // Verificar si el audio se carga correctamente
    audio.addEventListener('error', function() {
      audioError.style.display = 'block';
      console.error('Error al cargar el archivo de audio.');
    });

    // update duration when metadata ready
    audio.addEventListener('loadedmetadata', () => {
      seek.max = Math.floor(audio.duration || 0);
    });

    // play/pause
    let playing = false;
    playToggle.addEventListener('click', async () => {
      if (!playing) {
        try { 
          await audio.play(); 
          playing = true; 
          playToggle.textContent = 'â¸'; 
        }
        catch (e) { 
          console.warn('No se pudo reproducir:', e); 
          audioError.style.display = 'block';
          audioError.textContent = 'No se pudo reproducir el audio. Haz clic para intentar de nuevo.';
        }
      } else { 
        audio.pause(); 
        playing = false; 
        playToggle.textContent = 'â–¶'; 
      }
    });

    audio.addEventListener('timeupdate', () => {
      seek.value = Math.floor(audio.currentTime);
    });
    seek.addEventListener('input', () => { audio.currentTime = +seek.value; });

    // Simple heart spawn on tap anywhere in viewport to make it feel interactive
    const viewport = document.getElementById('viewport');
    const confettiLayer = document.getElementById('confetti');

    function createFallingHeart(xPercent, size = 40, speed = 6000) {
      const heart = document.createElement('img');
      heart.src = 'https://art.pixilart.com/2d2ed65cc301.png';
      heart.style.position = 'absolute';
      heart.style.left = xPercent + '%';
      heart.style.width = size + 'px';
      heart.style.height = size + 'px';
      heart.style.transform = 'translate(-50%, -10px)';
      heart.style.cursor = 'pointer';
      heart.style.zIndex = '5';
      heart.className = 'falling-heart';

      const drift = (Math.random() * 40) - 20;
      const startY = -40;
      const endY = viewport.clientHeight + 60;
      const animation = heart.animate([
        { transform: `translate(-50%, ${startY}px)`, opacity: 1 },
        { transform: `translate(calc(-50% + ${drift}px), ${endY}px)`, opacity: 0.05 }
      ], { duration: speed + (Math.random() * 1600), easing: 'cubic-bezier(.2,.7,.2,1)' });

      animation.onfinish = () => { heart.remove(); };
      return heart;
    }

    // Score + Game logic
    const scoreEl = document.getElementById('score');
    let score = 0;
    let gameInterval = null;
    let spawnInterval = 1200;
    let gameRunning = false;
    let gameTimeout = null;

    function startGame() {
      if (gameRunning) return;
      score = 0; scoreEl.textContent = score;
      gameRunning = true;
      // spawn hearts faster if score grows
      gameInterval = setInterval(() => {
        spawnHeartRandom();
      }, spawnInterval);

      // allow tapping hearts to collect
      viewport.addEventListener('click', onViewportClick);

      // 25 seconds game
      gameTimeout = setTimeout(endGame, 25000);
      
      // Mostrar mensaje secreto
      showSecretMessage("Â¡A jugar! â¤ï¸");
    }

    function endGame() {
      gameRunning = false;
      clearInterval(gameInterval);
      viewport.removeEventListener('click', onViewportClick);
      // confetti if score high
      if (score >= 12) celebrate();
      
      // Mensaje personalizado segÃºn puntuaciÃ³n
      let message = "Juego terminado! Puntaje: " + score + " ";
      if (score < 5) message += "ðŸ’” Puedes hacerlo mejor";
      else if (score < 10) message += "â¤ï¸ Â¡Bien hecho!";
      else if (score < 15) message += "ðŸ’– Â¡Excelente!";
      else message += "ðŸ’• Â¡Eres increÃ­ble!";
      
      showSecretMessage(message);
    }

    function resetGame() {
      score = 0; scoreEl.textContent = score;
      gameRunning = false;
      clearInterval(gameInterval);
      if (gameTimeout) clearTimeout(gameTimeout);
      // remove any hearts
      document.querySelectorAll('.falling-heart').forEach(e => e.remove());
    }

    function spawnHeartRandom() {
      const x = Math.random() * 100;
      const heart = createFallingHeart(x, 36, 4200 + Math.random() * 1800);
      // register tap to collect
      heart.addEventListener('click', (ev) => {
        ev.stopPropagation();
        collectHeart(heart);
      }, { passive: false });
      viewport.appendChild(heart);
      // increase difficulty slowly
      if (score >= 15) {
        if (gameInterval) { clearInterval(gameInterval); gameInterval = setInterval(spawnHeartRandom, Math.max(280, spawnInterval - 300)); }
      }
    }

    function collectHeart(node) {
      // pop + score
      node.remove();
      score += 1;
      scoreEl.textContent = score;
      // small pop animation on confetti layer
      burstAt(node.getBoundingClientRect().left + node.clientWidth / 2, node.getBoundingClientRect().top + node.clientHeight / 2);
    }

    function onViewportClick(e) {
      // if clicking empty space, spawn a decorative heart where tapped
      const rect = viewport.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const heart = createFallingHeart(x, 28, 2800 + Math.random() * 800);
      viewport.appendChild(heart);
      // tap on it to collect
      heart.addEventListener('click', ev => { ev.stopPropagation(); collectHeart(heart); }, { passive: false });
    }

    // small burst effect (tiny particles) used on collect
    function burstAt(pageX, pageY) {
      const c = document.createElement('div');
      c.style.position = 'absolute';
      // place relative to confettiLayer (which fills card); convert page coords
      const baseRect = confettiLayer.getBoundingClientRect();
      c.style.left = (pageX - baseRect.left) + 'px';
      c.style.top = (pageY - baseRect.top) + 'px';
      c.style.pointerEvents = 'none';
      // 6 tiny squares
      for (let i = 0; i < 6; i++) {
        const p = document.createElement('div');
        p.style.width = p.style.height = (6 + Math.random() * 6) + 'px';
        p.style.background = i % 2 == 0 ? '#ff6aa6' : '#ff2e81';
        p.style.position = 'absolute';
        p.style.left = '0px'; p.style.top = '0px';
        p.style.borderRadius = '2px';
        c.appendChild(p);
        const dx = (Math.random() * 120 - 60);
        const dy = (Math.random() * 120 - 80);
        p.animate([{ transform: 'translate(0,0)', opacity: 1 }, { transform: `translate(${dx}px, ${dy}px) scale(.4)`, opacity: 0 }], { duration: 700 + Math.random() * 300, easing: 'cubic-bezier(.2,.8,.2,1)' });
      }
      confettiLayer.appendChild(c);
      setTimeout(() => c.remove(), 1100);
    }

    // UI buttons
    document.getElementById('startGame').addEventListener('click', startGame);
    document.getElementById('resetGame').addEventListener('click', resetGame);

    // more hearts button: spawn a burst of hearts
    document.getElementById('moreHearts').addEventListener('click', () => {
      for (let i = 0; i < 10; i++) {
        setTimeout(() => {
          const x = 10 + Math.random() * 80;
          const heart = createFallingHeart(x, 36, 2800 + Math.random() * 1200);
          heart.addEventListener('click', ev => { ev.stopPropagation(); collectHeart(heart); }, { passive: false });
          viewport.appendChild(heart);
        }, i * 80);
      }
      showSecretMessage("Â¡Lluvia de corazones! ðŸ’–");
    });

    // confetti celebration (mini)
    function celebrate() {
      // small burst of colored confetti
      for (let i = 0; i < 30; i++) {
        const el = document.createElement('div');
        el.style.position = 'absolute';
        el.style.left = (Math.random() * 100) + '%';
        el.style.top = (Math.random() * 30) + '%';
        el.style.width = el.style.height = (6 + Math.random() * 8) + 'px';
        el.style.background = Math.random() > 0.5 ? '#ffd3ea' : '#ff8ab8';
        el.style.opacity = '0.95';
        confettiLayer.appendChild(el);
        el.animate([{ transform: 'translateY(0) rotate(0)', opacity: 1 }, { transform: `translateY(260px) rotate(${Math.random() * 360}deg)`, opacity: 0 }], { duration: 1400 + Math.random() * 800, easing: 'cubic-bezier(.2,.7,.2,1)' });
        setTimeout(() => el.remove(), 2200);
      }
    }

    document.getElementById('miniConfetti').addEventListener('click', function() {
      celebrate();
      showSecretMessage("Â¡Celebremos! ðŸŽ‰");
    });

    // share / add to home (simple share)
    document.getElementById('shareBtn').addEventListener('click', async () => {
      const shareData = { title: 'PAGINITA', text: 'Mira esto', url: location.href };
      try {
        if (navigator.share) { await navigator.share(shareData); }
        else { 
          showSecretMessage("Copia el enlace para compartir ðŸ“‹"); 
        }
      } catch (e) { console.warn(e); }
    });

    // Mostrar mensaje secreto
    function showSecretMessage(text) {
      const messageEl = document.getElementById('secretMessage');
      messageEl.textContent = text;
      messageEl.style.opacity = '1';
      
      setTimeout(() => {
        messageEl.style.opacity = '0';
      }, 3000);
    }

    // tap anywhere on card to spawn a decorative heart (not game)
    document.querySelector('.card').addEventListener('click', (e) => {
      // avoid clicks that are on game controls to reduce annoyance
      if (e.target.closest('.big-btn') || e.target.closest('input') || e.target.closest('button')) return;
      const rect = e.currentTarget.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const heart = createFallingHeart(x, 28, 2600 + Math.random() * 1000);
      e.currentTarget.appendChild(heart);
    }, { passive: true });

    // Accessibility: keyboard start game with "G"
    document.addEventListener('keydown', (e) => { 
      if (e.key.toLowerCase() === 'g') startGame(); 
      if (e.key.toLowerCase() === 'r') resetGame(); 
      if (e.key.toLowerCase() === 'h') {
        for (let i = 0; i < 5; i++) {
          setTimeout(() => {
            const x = Math.random() * 100;
            const heart = createFallingHeart(x, 28, 4200 + Math.random() * 1600); 
            document.querySelector('.card').appendChild(heart);
          }, i * 180);
        }
        showSecretMessage("Â¡Hearts! ðŸ’– Presiona 'G' para jugar");
      }
    });

    // On load: small intro hearts
    for (let i = 0; i < 8; i++) {
      setTimeout(() => { 
        const x = Math.random() * 100; 
        const heart = createFallingHeart(x, 28, 4200 + Math.random() * 1600); 
        document.querySelector('.card').appendChild(heart); 
      }, i * 180);
    }
    
    // Inicializar corazones flotantes
    initFloatingHearts();
    
    // Mensaje de bienvenida
    setTimeout(() => {
      showSecretMessage("Bienvenida a tu pÃ¡gina especial ðŸ’– Presiona 'H' para corazones");
    }, 1000);

    // Bubble drag logic
    const bubble = document.getElementById('noteBubble');
    let isDragging = false;
    let offsetX = 0;
    let offsetY = 0;

    bubble.addEventListener('mousedown', (e) => {
      isDragging = true;
      offsetX = e.clientX - bubble.offsetLeft;
      offsetY = e.clientY - bubble.offsetTop;
      bubble.style.cursor = 'grabbing';
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      bubble.style.cursor = 'grab';
    });

    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      moveBubble(e.clientX, e.clientY);
    });

    // Touch
    bubble.addEventListener('touchstart', (e) => {
      isDragging = true;
      const touch = e.touches[0];
      offsetX = touch.clientX - bubble.offsetLeft;
      offsetY = touch.clientY - bubble.offsetTop;
    });

    document.addEventListener('touchend', () => {
      isDragging = false;
    });

    document.addEventListener('touchmove', (e) => {
      if (!isDragging) return;
      const touch = e.touches[0];
      moveBubble(touch.clientX, touch.clientY);
    });

    function moveBubble(x, y) {
      let left = x - offsetX;
      let top = y - offsetY;

      // limitar dentro de pantalla
      left = Math.max(0, Math.min(window.innerWidth - bubble.offsetWidth, left));
      top = Math.max(0, Math.min(window.innerHeight - bubble.offsetHeight, top));

      bubble.style.left = left + 'px';
      bubble.style.top = top + 'px';
    }

  </script>
</body>

</html>