<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=0" />
    <title>Para Mariana ❤️</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Delius&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg1: #ffdeeb;
            --bg2: #f9a8d4;
            --accent: #ff3b8d;
            --accent-light: #ff85b3;
            --accent-dark: #d4005d;
            --text-main: #4a041a;
            --glass: rgba(255, 255, 255, 0.75);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            font-family: 'Delius', cursive;
            background: linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
            color: var(--text-main);
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden;
        }

        .bg-gradient {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.4) 0%, transparent 80%);
            z-index: -1;
        }

        .container {
            width: 92%; max-width: 420px; padding: 30px 0; z-index: 1;
            display: flex; flex-direction: column; gap: 20px;
        }

        .header-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 13px; color: white; text-align: center;
            line-height: 1.6; text-shadow: 2px 2px 0px var(--accent);
            background: var(--accent-light); padding: 18px;
            border-radius: 20px; border: 3px solid white;
            box-shadow: 0 8px 20px rgba(255, 59, 141, 0.3);
        }

        .music-card {
            background: var(--glass); backdrop-filter: blur(15px);
            border-radius: 30px; padding: 20px; display: flex;
            align-items: center; gap: 15px; border: 2px solid white;
            box-shadow: 0 12px 25px rgba(0,0,0,0.08); position: relative;
        }

        .album-wrapper { position: relative; width: 70px; height: 70px; }

        .album-art {
            width: 100%; height: 100%; border-radius: 50%;
            background: url('https://img.youtube.com/vi/M0YKOq_lWSQ/0.jpg') no-repeat center;
            background-size: cover; border: 3px solid var(--accent);
            animation: rotate 8s linear infinite; animation-play-state: paused;
        }

        .playing .album-art { animation-play-state: running; }
        @keyframes rotate { 100% { transform: rotate(360deg); } }

        .song-info { flex: 1; }
        .song-info p { margin: 0; font-size: 15px; font-weight: bold; color: var(--accent-dark); }
        .song-info span { font-size: 12px; color: #777; }

        .message-box {
            background: white; padding: 30px; border-radius: 35px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1); line-height: 1.9;
            font-size: 17px; position: relative; max-height: 55vh;
            overflow-y: auto; border: 1px solid rgba(0,0,0,0.05);
        }

        .perdon-badge {
            display: table; background: linear-gradient(to right, var(--accent), var(--accent-light));
            color: white; padding: 6px 18px; border-radius: 50px;
            font-family: 'Press Start 2P'; font-size: 9px;
            margin: 0 auto 20px auto; box-shadow: 0 4px 10px rgba(255, 59, 141, 0.3);
        }

        #play-btn {
            background: var(--accent); border: none; color: white;
            border-radius: 50%; width: 55px; height: 55px;
            cursor: pointer; font-size: 22px; display: flex;
            align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(255, 59, 141, 0.4);
            transition: 0.3s;
        }

        #play-btn:active { transform: scale(0.9); }

        .footer-text { text-align: center; font-size: 11px; opacity: 0.7; margin-top: 10px; margin-bottom: 20px; font-weight: bold; }
        .bg-hearts { position: fixed; z-index: 0; pointer-events: none; }
        
        /* Estilo de la barra de scroll */
        .message-box::-webkit-scrollbar { width: 5px; }
        .message-box::-webkit-scrollbar-thumb { background: var(--bg2); border-radius: 10px; }
    </style>
</head>
<body>

    <div class="bg-gradient"></div>
    <div id="hearts-container"></div>

    <div class="container">
        <div class="header-title">Perdoname <br> bonita.</div>

        <div class="music-card" id="card">
            <div class="album-wrapper">
                <div class="album-art"></div>
            </div>
            <div class="song-info">
                <p>Acurrucar</p>
                <span>Ed Maverick</span>
                <br>
                <small id="statusText" style="color: var(--accent-light); font-weight: bold;">escuchala y puede que comprendas un poquito mas del como me siento, recuerda que yo te amo.</small>
            </div>
            <button id="play-btn">▶</button>
        </div>

        <audio id="miAudio" src="cancion6.mp3" loop></audio>

        <div class="message-box">
            <div class="perdon-badge">una promesa.</div>
            holapp yo se que tu ya no quieres seguir con nuestra relacion, pero quiero que me escuches porfavor y comprendas, tomame enserio, no estoy jugando para nada, todo lo que te he dicho hasta el momento lo hare, solo dame tu concentimiento y te juro que yo lo hare, tenlo por seguro, no me dare por vencido mariana, yo te amo, y yo cuando amo a alguien puedo hacer lo que sea por ella y mas si es por ti, que se q igual puede que no sientas lo que yo siento cuando te veo, te ves tan linda, aunque estes asi conmigo me gustas mucho y creo que jamas podre quitarme este sentimiento, entiendo si lo que quieres es que seamos amigos, pero quiero demostrarte que puedo hacer todo por ti, no habra ningun obstaculo, yo en verdad quiero algo formal contigo y perdoname por ser tan insistente pero es que yo se que lo puedo lograr, aunque tu tengas tus planes a futuro se podran cruzar con los mios, yo me encargare de eso, te lo juro por mi mismo. 

            Te amo mucho, no olvides eso mariana, te amo con todo lo que eres tu, eres tan linda en todo sentido, he incluso me gusta mirarte y apreciar lo hermosa que eres, pero quiero que entendieras eso mariana porfavor, no dejemos esto asi. Te lo juro que todo saldra bien, porfavor bonita yo te amo mucho y yo hare lo que sea por estar contigo, cambiar es lo de menos, porque seria mejor para ti y para mi y yo quiero que tu estes bien, te juro que no te faltara nada conmigo ni actualmente ni en un futuro, yo puedo hacer de todo contigo lo unico que no podria seria ir a un antro pero solo eso, de ahi en mas mariana puedo hacer todo, ya ahorita busque mi pasaporte, mi curp, mi acta y mis constancias de estudios, solo me faltaria los recibos y lo del formulario ds 160 o algo asi era pero por eso en esta semana ire me apurare con eso en verdad necesito apurarme con todo eso, no te quedaras estancada conmigo mariana porque yo no soy un conformista, yo quiero salir adelante y no vivir aqui tampoco, yo se que ganare mucho dinero y eso tambien te lo puedo jurar porque se que lo que hago es mucha experiencia y muy bien pagado, no me han aceptado en trabajos donde pagan bien de los que son remotamente por mi edad pero cuando falte unos 4 meses para cumplir los 18 ya me aceptan en trabajos mas complicados y asi, sin embargo por el momento yo hare mas cosas para ganar mas e ir ahorrando para comprar un departamento en un año o un año y medio probablemente ya pueda comprar uno, estuve investigando y cuestan aldrededor de 100,000 dolares y mensualmente pagaria 1000 asi que no es tanto pedo yo estare estudiando, trabajando y viviendo en el paso estoy completamente seguro de eso incluso si tu planeas irte a otro lugar no hay problema yo podre ir, voy a hacer todo desde ahora y veras que pronto todo saldra bien, y cuando tu lo puedas ver que lo estoy haciendo espero podamos seguir porque te entiedno ahora mismo, se que ahorita no me tomaras en serio pero yo estoy diciendote esto con toda mi alma, tampoco me gusta contar mis planes pero mirap contigo yo los comparto porque se que tu tienes planes asi y tu tambien quieres salir adelante, mientras los dos querarramos salir adelante, lo lograremos, para todo hay solucion. 

            Te amo mariana, te amo y se que no me quieres lastimar pero no lo haces bonita, yo en verdad quiero seguir contigo y quiero que todo salga bien, porfavor dejame serlo, dejame ser ese que te de todo el amor y la vida que te mereces, creeme que conmigo nada te faltara, todo te lo dare mi bonita, ni siquiera tendrias q trabajar, solo dame tiempo mariana, dame tiempo y veras que todo saldra bien.
        </div>
        
        <div class="footer-text">Hecho por brau para mariana <3 </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getDatabase, ref, push, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDj2tNpNgiZPWtTYKotGq3ULALzJltHOKM",
        authDomain: "pagina-81a41.firebaseapp.com",
        databaseURL: "https://pagina-81a41-default-rtdb.firebaseio.com",
        projectId: "pagina-81a41",
        storageBucket: "pagina-81a41.appspot.com",
        messagingSenderId: "803503362455",
        appId: "1:803503362455:web:ebf1271cf65943210174d2"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // --- IDENTIFICACIÓN SILENCIOSA ---
    // Busca 'username' en la caché del navegador de Mariana
    const identificadoComo = localStorage.getItem('username') || 'Alguien (Sin caché)';

    function registrarEvento(tipo) {
        const rutaRef = ref(db, 'apology_page_events');
        push(rutaRef, {
            visitor: identificadoComo, // Aquí saldrá "Mariana" si ya entró a tus otros sitios
            eventType: tipo,
            timestamp: serverTimestamp(),
            horaLocal: new Date().toLocaleString()
        }).catch(e => console.error("Error log:", e));
    }

    // Log automático al abrir
    window.addEventListener('load', () => {
        registrarEvento("Abrió la página de Mariana");
    });

    // --- LÓGICA DEL REPRODUCTOR ---
    const audio = document.getElementById('miAudio');
    const btn = document.getElementById('play-btn');
    const card = document.getElementById('card');
    const status = document.getElementById('statusText');

    btn.addEventListener('click', function() {
        if (audio.paused) {
            audio.play().then(() => {
                btn.innerText = '⏸';
                card.classList.add('playing');
                status.innerText = "Escuchando contigo...";
                registrarEvento("Dio PLAY a la canción");
            });
        } else {
            audio.pause();
            btn.innerText = '▶';
            card.classList.remove('playing');
            status.innerText = "Pausó la música";
            registrarEvento("Pausó la canción");
        }
    });
</script>

<script>
    // Animación de corazones (Javascript normal)
    function createHeart() {
        const container = document.getElementById('hearts-container') || document.body;
        const heart = document.createElement('div');
        heart.innerHTML = '❤️';
        heart.className = 'bg-hearts';
        heart.style.cssText = `
            position: fixed;
            left: ${Math.random() * 100}vw;
            top: 110vh;
            font-size: ${Math.random() * 20 + 10}px;
            opacity: ${Math.random() * 0.5 + 0.3};
            z-index: 0;
            pointer-events: none;
            transition: transform 6s linear, opacity 6s;
        `;
        container.appendChild(heart);
        setTimeout(() => {
            heart.style.transform = `translateY(-120vh) rotate(${Math.random() * 360}deg)`;
            heart.style.opacity = '0';
        }, 50);
        setTimeout(() => heart.remove(), 7000);
    }
    setInterval(createHeart, 400);
</script>
</body>
</html>
