<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Para emo 💖</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Delius&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="https://cdn.pixabay.com/photo/2017/09/23/16/33/pixel-heart-2779422_1280.png">
  <style>
    :root {
      --bg1: #fff0f6;
      --bg2: #ffd7eb;
      --accent: #ff3b8d;
      --accent-light: #ff73a7;
      --accent-dark: #e5005e;
      --soft: rgba(255, 255, 255, 0.6);
      --glass: rgba(255, 255, 255, 0.18);
      --shadow: 0 10px 30px rgba(255, 60, 130, 0.15);
      --radius: 20px;
      --ui-pad: 14px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: 'Delius', cursive;
      background: linear-gradient(135deg, #fff0f6 0%, #ffd7eb 100%);
      color: #2a2530;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 15% 50%, rgba(255, 182, 193, 0.2) 0%, transparent 25%),
        radial-gradient(circle at 85% 30%, rgba(255, 192, 203, 0.2) 0%, transparent 25%),
        radial-gradient(circle at 50% 80%, rgba(255, 182, 193, 0.2) 0%, transparent 25%);
      pointer-events: none;
      z-index: -1;
    }

    .wrap {
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px;
      gap: 20px;
    }

    .card {
      width: min(900px, 96%);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.85) 0%, rgba(255, 245, 250, 0.85) 100%);
      border-radius: var(--radius);
      padding: clamp(18px, 4vw, 28px);
      box-shadow: var(--shadow), 0 0 0 1px rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 20, 90, 0.1);
      position: relative;
      overflow: hidden;
    }

    .card::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: linear-gradient(90deg, #ff9ebb, #ff73a7, #ff3b8d);
      border-radius: 10px 10px 0 0;
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    h1 {
      font-size: clamp(24px, 6vw, 38px);
      margin: 0;
      color: var(--accent);
      letter-spacing: .02em;
      display: flex;
      align-items: center;
      gap: .6rem;
      transform-origin: center;
      animation: titlePop 1s ease;
      text-shadow: 0 4px 12px rgba(255, 80, 150, 0.2);
      font-family: 'Press Start 2P', cursive;
    }

    @keyframes titlePop {
      0% { transform: scale(.96); opacity: 0; }
      70% { transform: scale(1.05); }
      100% { transform: scale(1); opacity: 1; }
    }

    .sub {
      color: #6e6170;
      font-weight: 700;
      font-size: 12px;
      font-family: 'Press Start 2P', cursive;
    }

    .player {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      align-items: center;
      margin-top: 15px;
    }

    .play-card {
      background: rgba(255, 255, 255, 0.6);
      padding: 16px;
      border-radius: 16px;
      display: flex;
      gap: 16px;
      align-items: center;
      box-shadow: 0 6px 16px rgba(255, 50, 130, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.6);
    }

    .big-btn {
      background: linear-gradient(180deg, var(--accent-light), var(--accent));
      color: white;
      border: 0;
      padding: 12px 16px;
      border-radius: 14px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(255, 60, 140, 0.25);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
      font-family: 'Delius', cursive;
      font-size: 15px;
    }

    .big-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 60, 140, 0.35);
    }

    .big-btn:active {
      transform: translateY(1px);
      box-shadow: 0 3px 10px rgba(255, 60, 140, 0.2);
    }

    .seek {
      width: 100%;
      appearance: none;
      height: 8px;
      border-radius: 999px;
      background: linear-gradient(90deg, #ffd3ea, #ff9fd4);
      border: 1px solid rgba(255, 255, 255, 0.6);
      cursor: pointer;
      margin-top: 8px;
    }

    .seek::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: white;
      border: 3px solid var(--accent);
      box-shadow: 0 3px 10px rgba(255, 60, 130, 0.3);
      cursor: pointer;
      transition: all 0.2s;
    }

    .seek::-webkit-slider-thumb:hover {
      transform: scale(1.15);
    }

    .game-panel {
      margin-top: 20px;
      display: flex;
      gap: 16px;
      align-items: stretch;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .game-card {
      flex: 1;
      min-width: 200px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.3));
      padding: 18px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 6px 16px rgba(255, 50, 130, 0.08);
    }

    .score {
      font-size: 24px;
      font-weight: 900;
      color: var(--accent);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .small {
      font-size: 13px;
      color: #7b6e78;
      font-weight: 600;
      line-height: 1.5;
    }

    .game-viewport {
      width: 100%;
      height: 380px;
      border-radius: 16px;
      overflow: hidden;
      position: relative;
      background: linear-gradient(135deg, rgba(255, 230, 240, 0.9), rgba(255, 240, 246, 0.8));
      border: 2px dashed rgba(255, 100, 150, 0.2);
      margin-top: 15px;
      -webkit-tap-highlight-color: transparent;
      box-shadow: inset 0 0 20px rgba(255, 100, 150, 0.1);
    }

    .hud-row {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .pixel-heart {
      width: 26px;
      height: 26px;
      display: inline-block;
      filter: drop-shadow(0 4px 8px rgba(255, 90, 160, 0.2));
      transform: translateY(0);
      animation: heartLift 3s ease-in-out infinite;
    }

    .pixel-heart:nth-child(2) {
      animation-delay: .4s;
    }

    .pixel-heart:nth-child(3) {
      animation-delay: .8s;
    }

    @keyframes heartLift {
      0% { transform: translateY(0) scale(.98); }
      50% { transform: translateY(-6px) scale(1.03); }
      100% { transform: translateY(0) scale(.98); }
    }

    footer {
      width: 100%;
      text-align: center;
      color: #856f80;
      font-weight: 700;
      font-size: 13px;
      margin-top: 20px;
      font-family: 'Press Start 2P', cursive;
    }

    .confetti {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: visible;
    }

    .vignette {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.03) 100%);
    }
    
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .floating-heart {
      position: absolute;
      width: 28px;
      height: 28px;
      opacity: 0.6;
      animation: float 18s infinite linear;
    }
    
    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0.7;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }
    
    .audio-error {
      display: none;
      background: rgba(255, 200, 200, 0.8);
      border-radius: 8px;
      padding: 8px 12px;
      margin-top: 8px;
      font-size: 11px;
      color: #d32f2f;
    }
    
    .secret-message {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.95);
      padding: 12px 18px;
      border-radius: 24px;
      font-size: 13px;
      color: #ff3b8d;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transition: opacity 0.5s;
      z-index: 1000;
      text-align: center;
      max-width: 90%;
      font-weight: 600;
      border: 1px solid rgba(255, 100, 150, 0.2);
    }
    
    .note-bubble {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 170px;
      min-height: 45px;
      max-height: 200px;
      background: rgba(255, 223, 235, 0.9);
      border: 2px dashed #ff3b8d;
      border-radius: 18px;
      padding: 10px;
      font-family: 'Press Start 2P', monospace;
      font-size: 11px;
      color: #2a2530;
      overflow-y: auto;
      box-shadow: 0 6px 18px rgba(255, 50, 130, 0.2);
      z-index: 9999;
      cursor: grab;
      line-height: 1.4;
    }
    
    .sparkle {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #fff;
      border-radius: 50%;
      pointer-events: none;
      z-index: 100;
      animation: sparkle 1s forwards;
    }
    
    @keyframes sparkle {
      0% {
        transform: translate(0, 0) scale(0);
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty)) scale(1.5);
        opacity: 0;
      }
    }

    /* Nuevos estilos para la sección de motivos */
    .reasons-section {
      margin-top: 30px;
      text-align: center;
    }
    
    .reasons-title {
      font-family: 'Press Start 2P', cursive;
      color: var(--accent);
      font-size: 18px;
      margin-bottom: 20px;
      text-shadow: 0 2px 4px rgba(255, 80, 150, 0.2);
    }
    
    .reasons-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 15px;
    }
    
    .reason-card {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 12px;
      padding: 15px;
      width: calc(50% - 15px);
      min-width: 250px;
      box-shadow: 0 4px 10px rgba(255, 60, 140, 0.1);
      transition: transform 0.3s ease;
    }
    
    .reason-card:hover {
      transform: translateY(-5px);
    }
    
    .reason-number {
      background: var(--accent);
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 10px;
      font-weight: bold;
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
    }
    
    .reason-text {
      font-size: 14px;
      line-height: 1.4;
    }
    
    .apology-btn {
      margin-top: 20px;
      background: linear-gradient(180deg, #ff9ebb, #ff73a7);
    }

    @media (max-width: 768px) {
      .player {
        grid-template-columns: 1fr;
      }
      
      .play-card {
        flex-direction: column;
        text-align: center;
        gap: 12px;
      }
      
      .game-panel {
        flex-direction: column;
      }
      
      .game-viewport {
        height: 300px;
      }
      
      h1 {
        font-size: 20px;
      }
      
      .reason-card {
        width: 100%;
      }
      
      .note-bubble {
        width: 140px;
        font-size: 9px;
        right: 10px;
        bottom: 10px;
      }
    }
    
    @media (max-width: 480px) {
      .game-viewport {
        height: 250px;
      }
      
      .note-bubble {
        width: 130px;
        font-size: 8px;
        right: 5px;
        bottom: 5px;
      }
      
      .big-btn {
        padding: 10px 12px;
        font-size: 14px;
      }
      
      .reason-card {
        min-width: 100%;
      }
    }
    /* Estilo para la segunda burbuja en posición superior izquierda */
.bubble-top-left {
  top: 50px;
  right: auto;
  left: 50px;
  bottom: auto;
  width: 160px;
  background: rgba(255, 236, 245, 0.9);
  border: 2px dashed #ff73a7;
}
#lastUpdate {
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 182, 193, 0.85);
  color: white;
  font-family: 'Arial', sans-serif;
  font-size: 11px;
  padding: 6px 12px;
  border-radius: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  z-index: 2000;
  animation: fadeIn 2s ease-in-out;
}

  </style>
</head>

<body>
  <div id="lastUpdate">Última actualización: ...</div>

  <!-- Burbuja decorativa -->
  <div class="note-bubble" id="noteBubble">
    💌 olaemo, espero que hayas tenido un increible dia y lo hayas pasado demasiado bien, hice ese render ahorita que no tenia internet, pero ya porfin tuve un poco de tiempo para actualizarte la paginita <33
  </div>

<!-- Burbuja decorativa 2 (nueva) -->
<div class="note-bubble bubble-top-left" id="noteBubble2">
  tequieromucho <3
</div>

  <!-- Floating hearts background -->
  <div class="floating-hearts" id="floatingHearts"></div>

  <div class="vignette"></div>

  <div class="wrap">
    <div class="card" role="region" aria-label="Dedicado">
      <div class="title-row">
        <div style="display:flex;align-items:center;gap:12px">
          <h1>
            <img src="https://art.pixilart.com/2d2ed65cc301.png" width="32" height="32" style="margin-right:8px">
            PARA TI
          </h1>

          <div class="hud-row small">
            <img class="pixel-heart" src="https://art.pixilart.com/2d2ed65cc301.png" width="26" height="26" alt="Corazón">
            <img class="pixel-heart" src="https://art.pixilart.com/2d2ed65cc301.png" width="26" height="26" alt="Corazón">
            <img class="pixel-heart" src="https://art.pixilart.com/2d2ed65cc301.png" width="26" height="26" alt="Corazón">
          </div>
        </div>
        
        <div class="texto-centrado" style="text-align: center; margin: 30px 0 20px 0;">
          <h2 style="font-family: 'Press Start 2P', cursive; color: #ff3b8d; font-size: 24px; text-shadow: 0 4px 12px rgba(255, 80, 150, 0.3); line-height: 1.4;">
            <3333
          </h2>
          <p style="font-family: 'Delius', cursive; color: #6e6170; font-size: 16px; margin-top: 15px; line-height: 1.5; padding: 0 10px;">
           RECUERDA LO BONITA QUE ERES SIEMPRE <3
          </p>
        </div>

              <!-- Imagen agregada debajo del texto -->
      <div style="text-align: center; margin: 20px 0;">
        <img src="http://imgfz.com/i/a1gVLjc.png" alt="rendersito" style="max-width: 100%; height: auto; border-radius: 15px; box-shadow: 0 5px 15px rgba(255, 255, 255, 0.25);">
      </div>
        
        <div style="display:flex;gap:10px;align-items:center">
          <div class="sub">emocat · my · special · girl</div>
          <button class="big-btn" id="shareBtn" aria-label="Compartir">💌 Compartir</button>
        </div>
      </div>

      <!-- Player -->
      <div class="player" style="margin-top:15px">
        <div class="play-card" style="flex:1">
          <div style="display:flex;flex-direction:column;gap:8px;flex:1">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;">
              <div style="display:flex;flex-direction:column">
                <strong style="color:var(--accent);font-size:16px">Pruebame a ti</strong>
                <span class="small">Josean Log</span>
              </div>
              <div style="display:flex;gap:10px;align-items:center">
                <button class="big-btn" id="playToggle">▶</button>
              </div>
            </div>

            <audio id="audio" preload="metadata">
              <source src="music.mp3" type="audio/mpeg">
              Tu navegador no soporta audio.
            </audio>
            
            <div class="audio-error" id="audioError">
              No se pudo cargar el audio. Asegúrate de tener conexión a internet.
            </div>

            <input type="range" id="seek" class="seek" min="0" step="0.1" value="0" aria-label="barra de progreso">
          </div>

          <div style="width:160px;display:flex;flex-direction:column;align-items:flex-end">
            <div style="font-weight:900;color:#7b6374;font-size:15px">Reproduce esta canción</div>
            <div class="small" style="margin-top:8px">Toca la pantalla para crear corazones</div>
          </div>
        </div>

        <!-- side small panel -->
        <div style="width:220px;display:flex;flex-direction:column;gap:10px">
          <div class="game-card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div class="small">Juego</div>
              <div class="score" id="score">0</div>
            </div>
            <div style="margin-top:10px;font-size:13px;color:#6b5866">Atrapa corazones tocándolos. Duración 25s</div>
            <div style="display:flex;gap:10px;margin-top:15px">
              <button class="big-btn" id="startGame" style="padding:10px 12px;font-size:13px">Jugar</button>
              <button class="big-btn" id="resetGame"
                style="padding:10px 12px;font-size:13px;background:linear-gradient(180deg,#fff,#ffd7ec);color:var(--accent)">Reset</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Game viewport -->
      <div class="game-panel">
        <div class="game-card" style="flex:1">
          <div id="viewport" class="game-viewport" aria-label="Área de juego táctil">
            <!-- falling hearts inserted here -->
          </div>
        </div>

        <div class="game-card" style="width:220px">
          <div style="font-weight:900;color:var(--accent);font-size:20px">Logros</div>
          <div style="margin-top:10px" id="achievements">
            <div class="small">— Toca para crear corazoncitos</div>
            <div class="small">— Aumenta la dificultad a 15 pts</div>
            <div class="small">— <33 </div>
          </div>
        </div>
      </div>

      <!-- Sección de motivos -->
      <div class="reasons-section">
        <div class="reasons-title">8 razones por las que me enamore de ti</div>
        <div class="reasons-container">
          <div class="reason-card">
            <div class="reason-number">1</div>
            <div class="reason-text">Primeramente, porque eres unica.</div>
          </div>
          <div class="reason-card">
            <div class="reason-number">2</div>
            <div class="reason-text">Me gusta hablar contigo.</div>
          </div>
          <div class="reason-card">
            <div class="reason-number">3</div>
            <div class="reason-text">Me encanta hablar solo contigo incluso cuando no tengo ganas de hacerlo.</div>
          </div>
          <div class="reason-card">
            <div class="reason-number">4</div>
            <div class="reason-text">Eres demasiado bonita (la mas bonita que eh conocido).</div>
          </div>
          <div class="reason-card">
            <div class="reason-number">5</div>
            <div class="reason-text">Tu voz, en serio es encantadora.</div>
          </div>
          <div class="reason-card">
            <div class="reason-number">6</div>
            <div class="reason-text">nunca habia sentido algo asi por alguien y eso te lo juro por mi vida.</div>
          </div>
          <div class="reason-card">
            <div class="reason-number">7</div>
            <div class="reason-text">Enserio Te quiero demasiado.</div>
          </div>
          <div class="reason-card">
            <div class="reason-number">8</div>
            <div class="reason-text">Simplemente eres tú, y eso es más que suficiente para mí.</div>
          </div>
        </div>
        
        <button class="big-btn apology-btn" id="apologyBtn">picale aqui JAJSJD</button>
      </div>

      <div style="display:flex;gap:10px;align-items:center;margin-top:15px;flex-wrap:wrap;">
        <button class="big-btn" id="moreHearts">💗 +Hacer llover corazones</button>
        <button class="big-btn" id="miniConfetti"
          style="background:linear-gradient(180deg,#fff,#ffe6f2);color:var(--accent)"> Celebrar</button>
      </div>

      <div class="confetti" id="confetti"></div>
    </div>

    <footer>
      Hecho con por braw para emo (tequieromucho mariana.)
      <p style="font-size: 6px; color: gray; margin-top: 30px;">
        Powered By BrauuStudiosSC
      </p>
    </footer>

  </div>

  <!-- Secret message -->
  <div class="secret-message" id="secretMessage"></div>

  <!-- Optional small vignette overlay -->
  <div class="vignette" aria-hidden="true"></div>

  <script>
    // Inicializar corazones flotantes de fondo
    function initFloatingHearts() {
      const container = document.getElementById('floatingHearts');
      for (let i = 0; i < 25; i++) {
        const heart = document.createElement('img');
        heart.src = 'https://art.pixilart.com/2d2ed65cc301.png';
        heart.className = 'floating-heart';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDelay = Math.random() * 20 + 's';
        heart.style.animationDuration = (15 + Math.random() * 15) + 's';
        heart.style.width = '28px';
        heart.style.height = '28px';
        container.appendChild(heart);
      }
    }
    
    // Efecto de destellos al hacer clic
    function createSparkle(x, y) {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.style.left = x + 'px';
      sparkle.style.top = y + 'px';
      
      const tx = (Math.random() - 0.5) * 100;
      const ty = (Math.random() - 0.5) * 100;
      sparkle.style.setProperty('--tx', tx + 'px');
      sparkle.style.setProperty('--ty', ty + 'px');
      
      document.body.appendChild(sparkle);
      
      setTimeout(() => {
        sparkle.remove();
      }, 1000);
    }
    
    // Basic player controls
    const audio = document.getElementById('audio');
    const playToggle = document.getElementById('playToggle');
    const seek = document.getElementById('seek');
    const audioError = document.getElementById('audioError');

    // Verificar si el audio se carga correctamente
    audio.addEventListener('error', function() {
      audioError.style.display = 'block';
      console.error('Error al cargar el archivo de audio.');
    });

    // update duration when metadata ready
    audio.addEventListener('loadedmetadata', () => {
      seek.max = Math.floor(audio.duration || 0);
    });

    // play/pause
    let playing = false;
    playToggle.addEventListener('click', async () => {
      if (!playing) {
        try { 
          await audio.play(); 
          playing = true; 
          playToggle.textContent = '⏸'; 
        }
        catch (e) { 
          console.warn('No se pudo reproducir:', e); 
          audioError.style.display = 'block';
          audioError.textContent = 'No se pudo reproducir el audio. Haz clic para intentar de nuevo.';
        }
      } else { 
        audio.pause(); 
        playing = false; 
        playToggle.textContent = '▶'; 
      }
    });

    audio.addEventListener('timeupdate', () => {
      seek.value = Math.floor(audio.currentTime);
    });
    seek.addEventListener('input', () => { audio.currentTime = +seek.value; });

    // Simple heart spawn on tap anywhere in viewport to make it feel interactive
    const viewport = document.getElementById('viewport');
    const confettiLayer = document.getElementById('confetti');

    function createFallingHeart(xPercent, size = 50, speed = 7000) {
      const heart = document.createElement('img');
      heart.src = 'https://art.pixilart.com/2d2ed65cc301.png';
      heart.style.position = 'absolute';
      heart.style.left = xPercent + '%';
      heart.style.width = size + 'px';
      heart.style.height = size + 'px';
      heart.style.transform = 'translate(-50%, -10px)';
      heart.style.cursor = 'pointer';
      heart.style.zIndex = '5';
      heart.className = 'falling-heart';
      heart.style.transition = 'transform 0.2s';
      
      // Hacer los corazones más fáciles de hacer clic
      heart.style.pointerEvents = 'auto';

      const drift = (Math.random() * 30) - 15;
      const startY = -40;
      const endY = viewport.clientHeight + 60;
      const animation = heart.animate([
        { transform: `translate(-50%, ${startY}px)`, opacity: 1 },
        { transform: `translate(calc(-50% + ${drift}px), ${endY}px)`, opacity: 0.05 }
      ], { duration: speed + (Math.random() * 1000), easing: 'cubic-bezier(.2,.7,.2,1)' });

      animation.onfinish = () => { heart.remove(); };
      
      // Efecto de agrandamiento al pasar el mouse
      heart.addEventListener('mouseover', () => {
        heart.style.transform = 'translate(-50%, -10px) scale(1.15)';
      });
      
      heart.addEventListener('mouseout', () => {
        heart.style.transform = 'translate(-50%, -10px) scale(1)';
      });
      
      return heart;
    }

    // Score + Game logic
    const scoreEl = document.getElementById('score');
    let score = 0;
    let gameInterval = null;
    let spawnInterval = 1300;
    let gameRunning = false;
    let gameTimeout = null;

    function startGame() {
      if (gameRunning) return;
      score = 0; scoreEl.textContent = score;
      gameRunning = true;
      // spawn hearts faster if score grows
      gameInterval = setInterval(() => {
        spawnHeartRandom();
      }, spawnInterval);

      // allow tapping hearts to collect
      viewport.addEventListener('click', onViewportClick);

      // 25 seconds game
      gameTimeout = setTimeout(endGame, 25000);
      
      // Mostrar mensaje secreto
      showSecretMessage("❤️ Toca los corazones que caen");
    }

    function endGame() {
      gameRunning = false;
      clearInterval(gameInterval);
      viewport.removeEventListener('click', onViewportClick);
      // confetti if score high
      if (score >= 10) celebrate();
      
      // Mensaje personalizado según puntuación
      let message = "Juego terminado! Puntaje: " + score + " ";
      if (score < 5) message += "💔 Sigue intentando";
      else if (score < 10) message += "❤️ ¡Bien hecho!";
      else if (score < 15) message += "💖 ¡Excelente!";
      else message += "💕 ¡Eres increíble!";
      
      showSecretMessage(message);
    }

    function resetGame() {
      score = 0; scoreEl.textContent = score;
      gameRunning = false;
      clearInterval(gameInterval);
      if (gameTimeout) clearTimeout(gameTimeout);
      // remove any hearts
      document.querySelectorAll('.falling-heart').forEach(e => e.remove());
    }

    function spawnHeartRandom() {
      const x = Math.random() * 100;
      const heart = createFallingHeart(x, 50, 5000 + Math.random() * 2000);
      // register tap to collect
      heart.addEventListener('click', (ev) => {
        ev.stopPropagation();
        collectHeart(heart);
      }, { passive: false });
      viewport.appendChild(heart);
      
      // Aumentar dificultad gradualmente
      if (score >= 15 && gameInterval) {
        clearInterval(gameInterval); 
        spawnInterval = Math.max(800, spawnInterval - 100);
        gameInterval = setInterval(spawnHeartRandom, spawnInterval);
      }
    }

    function collectHeart(node) {
      // pop + score
      node.remove();
      score += 1;
      scoreEl.textContent = score;
      // Efecto de destello
      createSparkle(
        node.getBoundingClientRect().left + node.width/2,
        node.getBoundingClientRect().top + node.height/2
      );
      // small pop animation on confetti layer
      burstAt(node.getBoundingClientRect().left + node.clientWidth / 2, node.getBoundingClientRect().top + node.clientHeight / 2);
    }

    function onViewportClick(e) {
      // if clicking empty space, spawn a decorative heart where tapped
      const rect = viewport.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const heart = createFallingHeart(x, 40, 3000 + Math.random() * 1000);
      viewport.appendChild(heart);
      // tap on it to collect
      heart.addEventListener('click', ev => { ev.stopPropagation(); collectHeart(heart); }, { passive: false });
      
      // Efecto de destello
      createSparkle(e.clientX, e.clientY);
    }

    // small burst effect (tiny particles) used on collect
    function burstAt(pageX, pageY) {
      const c = document.createElement('div');
      c.style.position = 'absolute';
      // place relative to confettiLayer (which fills card); convert page coords
      const baseRect = confettiLayer.getBoundingClientRect();
      c.style.left = (pageX - baseRect.left) + 'px';
      c.style.top = (pageY - baseRect.top) + 'px';
      c.style.pointerEvents = 'none';
      // 6 tiny squares
      for (let i = 0; i < 8; i++) {
        const p = document.createElement('div');
        p.style.width = p.style.height = (6 + Math.random() * 6) + 'px';
        p.style.background = i % 2 == 0 ? '#ff6aa6' : '#ff2e81';
        p.style.position = 'absolute';
        p.style.left = '0px'; p.style.top = '0px';
        p.style.borderRadius = '50%';
        c.appendChild(p);
        const dx = (Math.random() * 100 - 50);
        const dy = (Math.random() * 100 - 60);
        p.animate([{ transform: 'translate(0,0)', opacity: 1 }, { transform: `translate(${dx}px, ${dy}px) scale(.4)`, opacity: 0 }], { duration: 700 + Math.random() * 300, easing: 'cubic-bezier(.2,.8,.2,1)' });
      }
      confettiLayer.appendChild(c);
      setTimeout(() => c.remove(), 1100);
    }

    // UI buttons
    document.getElementById('startGame').addEventListener('click', startGame);
    document.getElementById('resetGame').addEventListener('click', resetGame);

    // Botón de pedir perdón
    document.getElementById('apologyBtn').addEventListener('click', () => {
      showSecretMessage("ola, te quiero muchoooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo, asi ymas enserio demasiado <3");
      
      // Efecto especial de corazones
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const x = 10 + Math.random() * 80;
          const heart = createFallingHeart(x, 45, 3500 + Math.random() * 1500);
          heart.addEventListener('click', ev => { ev.stopPropagation(); collectHeart(heart); }, { passive: false });
          viewport.appendChild(heart);
        }, i * 150);
      }
      
      celebrate();
    });

    // more hearts button: spawn a burst of hearts
    document.getElementById('moreHearts').addEventListener('click', () => {
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const x = 10 + Math.random() * 80;
          const heart = createFallingHeart(x, 45, 3500 + Math.random() * 1500);
          heart.addEventListener('click', ev => { ev.stopPropagation(); collectHeart(heart); }, { passive: false });
          viewport.appendChild(heart);
        }, i * 150);
      }
      showSecretMessage("¡Lluvia de corazones! 💖");
    });

    // confetti celebration (mini)
    function celebrate() {
      // small burst of colored confetti
      for (let i = 0; i < 40; i++) {
        const el = document.createElement('div');
        el.style.position = 'absolute';
        el.style.left = (Math.random() * 100) + '%';
        el.style.top = (Math.random() * 30) + '%';
        el.style.width = el.style.height = (6 + Math.random() * 8) + 'px';
        el.style.background = Math.random() > 0.5 ? '#ffd3ea' : '#ff8ab8';
        el.style.opacity = '0.95';
        el.style.borderRadius = '50%';
        confettiLayer.appendChild(el);
        el.animate([{ transform: 'translateY(0) rotate(0)', opacity: 1 }, { transform: `translateY(260px) rotate(${Math.random() * 360}deg)`, opacity: 0 }], { duration: 1400 + Math.random() * 800, easing: 'cubic-bezier(.2,.7,.2,1)' });
        setTimeout(() => el.remove(), 2200);
      }
    }

    document.getElementById('miniConfetti').addEventListener('click', function() {
      celebrate();
      showSecretMessage("🎉");
    });

    // share / add to home (simple share)
    document.getElementById('shareBtn').addEventListener('click', async () => {
      const shareData = { title: 'PAGINITA', text: 'Mira esto', url: location.href };
      try {
        if (navigator.share) { await navigator.share(shareData); }
        else { 
          showSecretMessage("Copia el enlace para compartir 📋"); 
        }
      } catch (e) { console.warn(e); }
    });

    // Mostrar mensaje secreto
    function showSecretMessage(text) {
      const messageEl = document.getElementById('secretMessage');
      messageEl.textContent = text;
      messageEl.style.opacity = '1';
      
      setTimeout(() => {
        messageEl.style.opacity = '0';
      }, 3000);
    }

    // Efecto de destello al hacer clic en cualquier lugar
    document.addEventListener('click', (e) => {
      createSparkle(e.clientX, e.clientY);
    });

    // tap anywhere on card to spawn a decorative heart (not game)
    document.querySelector('.card').addEventListener('click', (e) => {
      // avoid clicks that are on game controls to reduce annoyance
      if (e.target.closest('.big-btn') || e.target.closest('input') || e.target.closest('button')) return;
      const rect = e.currentTarget.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const heart = createFallingHeart(x, 35, 2600 + Math.random() * 1000);
      e.currentTarget.appendChild(heart);
    }, { passive: true });

    // Atajos de teclado
    document.addEventListener('keydown', (e) => { 
      if (e.key.toLowerCase() === 'g') startGame(); 
      if (e.key.toLowerCase() === 'r') resetGame(); 
      if (e.key.toLowerCase() === 'h') {
        for (let i = 0; i < 5; i++) {
          setTimeout(() => {
            const x = Math.random() * 100;
            const heart = createFallingHeart(x, 40, 4200 + Math.random() * 1600); 
            document.querySelector('.card').appendChild(heart);
          }, i * 200);
        }
        showSecretMessage("¡Hearts! 💖 Presiona 'G' para jugar");
      }
    });

    // On load: small intro hearts
    for (let i = 0; i < 8; i++) {
      setTimeout(() => { 
        const x = Math.random() * 100; 
        const heart = createFallingHeart(x, 35, 4200 + Math.random() * 1600); 
        document.querySelector('.card').appendChild(heart); 
      }, i * 200);
    }
    
    // Inicializar corazones flotantes
    initFloatingHearts();
    
    // Mensaje de bienvenida
    setTimeout(() => {
      showSecretMessage("Hice esto con mucho cariño mariana bienvenida <33");
    }, 1000);

    // Bubble drag logic
    const bubble = document.getElementById('noteBubble');
    let isDragging = false;
    let offsetX = 0;
    let offsetY = 0;

    bubble.addEventListener('mousedown', (e) => {
      isDragging = true;
      offsetX = e.clientX - bubble.offsetLeft;
      offsetY = e.clientY - bubble.offsetTop;
      bubble.style.cursor = 'grabbing';
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      bubble.style.cursor = 'grab';
    });

    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      moveBubble(e.clientX, e.clientY);
    });

    // Touch
    bubble.addEventListener('touchstart', (e) => {
      isDragging = true;
      const touch = e.touches[0];
      offsetX = touch.clientX - bubble.offsetLeft;
      offsetY = touch.clientY - bubble.offsetTop;
    });

    document.addEventListener('touchend', () => {
      isDragging = false;
    });

    document.addEventListener('touchmove', (e) => {
      if (!isDragging) return;
      const touch = e.touches[0];
      moveBubble(touch.clientX, touch.clientY);
    });

    function moveBubble(x, y) {
      let left = x - offsetX;
      let top = y - offsetY;

      // limitar dentro de pantalla
      left = Math.max(0, Math.min(window.innerWidth - bubble.offsetWidth, left));
      top = Math.max(0, Math.min(window.innerHeight - bubble.offsetHeight, top));

      bubble.style.left = left + 'px';
      bubble.style.top = top + 'px';
    }
// Mostrar fecha/hora de última actualización
function updateLastUpdate() {
  const now = new Date();
  const options = { 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric', 
    hour: '2-digit', 
    minute: '2-digit' 
  };
  document.getElementById('lastUpdate').textContent = 
    "Última actualización: " + now.toLocaleDateString('es-ES', options);
}
updateLastUpdate();

  </script>
  <script>// Bubble drag logic for second bubble
const bubble2 = document.getElementById('noteBubble2');
let isDragging2 = false;
let offsetX2 = 0;
let offsetY2 = 0;

bubble2.addEventListener('mousedown', (e) => {
  isDragging2 = true;
  offsetX2 = e.clientX - bubble2.offsetLeft;
  offsetY2 = e.clientY - bubble2.offsetTop;
  bubble2.style.cursor = 'grabbing';
});

document.addEventListener('mouseup', () => {
  isDragging2 = false;
  bubble2.style.cursor = 'grab';
});

document.addEventListener('mousemove', (e) => {
  if (!isDragging2) return;
  moveBubble2(e.clientX, e.clientY);
});

// Touch for second bubble
bubble2.addEventListener('touchstart', (e) => {
  isDragging2 = true;
  const touch = e.touches[0];
  offsetX2 = touch.clientX - bubble2.offsetLeft;
  offsetY2 = touch.clientY - bubble2.offsetTop;
});

document.addEventListener('touchend', () => {
  isDragging2 = false;
});

document.addEventListener('touchmove', (e) => {
  if (!isDragging2) return;
  const touch = e.touches[0];
  moveBubble2(touch.clientX, touch.clientY);
});

function moveBubble2(x, y) {
  let left = x - offsetX2;
  let top = y - offsetY2;

  // limitar dentro de pantalla
  left = Math.max(0, Math.min(window.innerWidth - bubble2.offsetWidth, left));
  top = Math.max(0, Math.min(window.innerHeight - bubble2.offsetHeight, top));

  bubble2.style.left = left + 'px';
  bubble2.style.top = top + 'px';
  bubble2.style.right = 'auto';
}</script>
</body>

</html>

