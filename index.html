<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>perdoname.</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Delius&display=swap" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="https://cdn.pixabay.com/photo/2017/09/23/16/33/pixel-heart-2779422_1280.png">
<style>
    :root {
      --bg1: #FFDDF4; /* Rosa muy claro */
      --bg2: #FFC4E1; /* Rosa claro */
      --accent-text: #E5005E; /* Rosa intenso para texto */
      --accent-btn: #FF3B8D; /* Rosa para botón */
      --accent-btn-hover: #FF73A7; /* Rosa más claro para hover */
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --radius: 20px;
    }

    * { box-sizing: border-box; }

    body {
      height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Delius', cursive;
      background: linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 100%);
      color: #333;
      overflow: hidden; /* Oculta el overflow para el efecto de fondo */
      padding: 15px;
      position: relative; /* Necesario para los elementos de fondo */
    }

    /* Animación de fondo (burbujas o estrellas suaves) */
    .background-effect span {
        position: absolute;
        bottom: -50px; /* Inician desde abajo */
        background-color: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        animation: floatUp 15s infinite ease-in; /* Animación de flotar */
        opacity: 0;
        filter: blur(2px);
    }
    .background-effect span:nth-child(even) { background-color: rgba(255, 230, 240, 0.4); }

    .background-effect span:nth-child(1) { left: 10%; width: 20px; height: 20px; animation-duration: 12s; animation-delay: 0s; }
    .background-effect span:nth-child(2) { left: 20%; width: 30px; height: 30px; animation-duration: 15s; animation-delay: 1s; }
    .background-effect span:nth-child(3) { left: 25%; width: 15px; height: 15px; animation-duration: 10s; animation-delay: 2s; }
    .background-effect span:nth-child(4) { left: 40%; width: 25px; height: 25px; animation-duration: 13s; animation-delay: 3s; }
    .background-effect span:nth-child(5) { left: 50%; width: 35px; height: 35px; animation-duration: 18s; animation-delay: 4s; }
    .background-effect span:nth-child(6) { left: 60%; width: 22px; height: 22px; animation-duration: 11s; animation-delay: 5s; }
    .background-effect span:nth-child(7) { left: 70%; width: 28px; height: 28px; animation-duration: 16s; animation-delay: 6s; }
    .background-effect span:nth-child(8) { left: 80%; width: 18px; height: 18px; animation-duration: 9s; animation-delay: 7s; }
    .background-effect span:nth-child(9) { left: 85%; width: 27px; height: 27px; animation-duration: 14s; animation-delay: 8s; }
    .background-effect span:nth-child(10) { left: 95%; width: 32px; height: 32px; animation-duration: 17s; animation-delay: 9s; }
    
    @keyframes floatUp {
        0% { transform: translateY(0); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateY(-100vh); opacity: 0; }
    }

    .card {
      width: min(600px, 95%); /* Un poco más ancho para el texto largo */
      max-height: 90vh; /* Limita la altura en pantallas pequeñas */
      overflow-y: auto; /* Permite scroll si el contenido es muy largo */
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 230, 240, 0.9) 100%);
      border-radius: var(--radius);
      padding: clamp(25px, 5vw, 40px);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center;
      position: relative; /* Para que esté por encima del fondo */
      z-index: 10;
    }

    h1 {
      font-family: 'Press Start 2P', cursive;
      font-size: clamp(20px, 5vw, 26px);
      color: var(--accent-text);
      margin-top: 0;
      margin-bottom: 20px;
      animation: textGlow 2s ease-in-out infinite alternate;
    }

    @keyframes textGlow {
        from { text-shadow: 0 0 5px #ffc4e1; }
        to { text-shadow: 0 0 15px #ff73a7, 0 0 25px #ff3b8d; }
    }
    
    .apology-text {
        font-family: 'Delius', cursive;
        font-size: clamp(15px, 3vw, 17px);
        line-height: 1.6;
        color: #6a4c5a;
        margin: 25px 0;
        text-align: justify; /* Justifica el texto para una mejor lectura */
    }

    #catImage {
      width: clamp(120px, 30vw, 150px);
      height: auto;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin: 10px 0 25px 0;
      animation: floatImage 3s ease-in-out infinite alternate; /* Animación de flotar para la imagen */
    }

    @keyframes floatImage {
        0% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-10px) rotate(2deg); }
        100% { transform: translateY(0px) rotate(-2deg); }
    }

    button {
      color: white;
      padding: 15px 30px;
      font-family: 'Press Start 2P', cursive;
      font-size: 14px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      text-transform: uppercase;
      background-color: var(--accent-btn);
    }
    button:hover {
      background-color: var(--accent-btn-hover);
      transform: translateY(-3px);
    }
    a { text-decoration: none; }

</style>
</head>
<body>

<div class="background-effect">
    <span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span>
</div>

<div class="card" id="mainCard">
    <h1></span>:(</h1>
    
    <p class="apology-text">
        perdon se que a veces mis palabras pueden ser tontas y sin intencion de hacerte sentir mal. No hay excusa para ello, y lo lamento profundamente. La verdad es que lo último que quiero es verte triste o sentirte mal por algo que yo haya dicho, perdoname.
        <br><br>
        Cada palabra que te escribo ahora sale de lo más sincero de mi alma. Realmente te quiero muchísimo, eres la persona más linda, hermosa y valiosa para mí. No hay nada en el mundo que cambie eso. Te pido, con toda la humildad de mi ser, que me perdones. No fue mi intención, de verdad, miniña.
        <br><br>
        Sé que las palabras puede que no ayuden, pero quiero que sepas que siempre, siempre, estaré aquí para ti, pase lo que pase. ya no sere un tonto. Tu felicidad es una prioridad para mi. Por favor, perdóname, Te adoro.
    </p>

    <img id="catImage" src="https://i.pinimg.com/736x/99/ee/89/99ee898fe84362f3d5c7f0893df8b385.jpg" alt="Gatito tierno">

    <a href="index6.html">
        <button>Regresar al inicio</button>
    </a>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js";

    // --- CONFIGURACIÓN DE FIREBASE ---
    const firebaseConfig = {
      apiKey: "AIzaSyDj2tNpNgiZPWtTYKotGq3ULALzJltHOKM", authDomain: "pagina-81a41.firebaseapp.com",
      databaseURL: "https://pagina-81a41-default-rtdb.firebaseio.com", projectId: "pagina-81a41",
      storageBucket: "pagina-81a41.firebasestorage.app", messagingSenderId: "803503362455",
      appId: "1:803503362455:web:ebf1271cf65943210174d2"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    
    const userNameElement = document.getElementById('userName');
    let savedUsername = localStorage.getItem('username');

    if (savedUsername) {
        const capitalizedUsername = savedUsername.charAt(0).toUpperCase() + savedUsername.slice(1);
        userNameElement.textContent = capitalizedUsername;
    } else {
        userNameElement.textContent = "Tú"; 
    }

    async function logEvent(eventType) {
        try {
            await push(ref(db, "apology_page_events"), {
                eventType: eventType,
                visitor: savedUsername || "unknown_visitor",
                timestamp: new Date().toISOString()
            });
        } catch (e) {
            console.error(`Error al registrar evento:`, e);
        }
    }
    
    logEvent('APOLOGY_MESSAGE_VIEWED_V2'); // Evento actualizado para esta versión

</script>

</body>
</html>
