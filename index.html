<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PAGINA PARA EMOGATO <3 </title>
<style>
  body {
    background-color: #ffc0cb;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 30px;
    position: relative;
  }
  h1 {
    color: #fff;
    text-shadow: 1px 1px 2px #ff69b4;
  }
  .flower-button {
    font-size: 18px;
    padding: 10px 20px;
    margin: 6px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background-color: #ff69b4;
    color: white;
    transition: 0.3s;
  }
  .flower-button:hover {
    background-color: #ff1493;
  }
  #bouquet {
    margin-top: 30px;
    min-height: 150px;
  }
  .flower {
    font-size: 40px;
    margin: 5px;
    display: inline-block;
    position: relative;
    animation: pop 0.3s ease;
  }
  .remove {
    position: absolute;
    top: -10px;
    right: -10px;
    background: #ff1493;
    color: white;
    border-radius: 50%;
    font-size: 14px;
    width: 20px;
    height: 20px;
    line-height: 18px;
    cursor: pointer;
  }
  #count {
    margin-top: 20px;
    font-size: 18px;
    color: #800000;
  }
  #finishBtn {
    margin-top: 20px;
    font-size: 18px;
    padding: 12px 25px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background-color: #ff69b4;
    color: white;
    transition: 0.3s;
  }
  #finishBtn:hover {
    background-color: #ff1493;
  }
  #message {
    margin-top: 15px;
    padding: 10px;
    width: 70%;
    border-radius: 10px;
    border: 2px solid #ff69b4;
    font-size: 12px;
  }
  @keyframes pop {
    0% {transform: scale(0);}
    100% {transform: scale(1);}
  }
  #tinyImg {
  position: absolute; /* la hace flotar sobre el contenido */
  top: 10px;          /* distancia desde arriba */
  right: 10px;        /* distancia desde la derecha */
  width: 60px;        /* tamaño pequeño */
  height: auto;       /* mantiene proporción */
  border-radius: 8px; /* opcional: esquinas redondeadas */
  box-shadow: 1px 1px 5px rgba(0,0,0,0.3); /* opcional: sombra */
}

</style>
</head>
<body>
<img id="tinyImg" src="https://i.ibb.co/21npLkTH/7cbaa984e87790964fe0dd4da52fd4b3.jpg" alt="imagensita" />

<h1>Que flores de estas escogerías en un ramo?? 🌸</h1>
<p>Haz clic en las flores en las cuales agregarias:</p>

<button class="flower-button" onclick="addFlower('🌹')">Rosa</button>
<button class="flower-button" onclick="addFlower('🌻')">Girasol</button>
<button class="flower-button" onclick="addFlower('🌷')">Tulipán</button>
<button class="flower-button" onclick="addFlower('🌼')">Margarita</button>
<button class="flower-button" onclick="addFlower('💐')">Sorpresa</button>
<button class="flower-button" onclick="addFlower('🌺')">Hibisco</button>
<button class="flower-button" onclick="addFlower('🌸')">Cerezo</button>

<div id="bouquet"></div>
<p id="count">Total de flores: 0</p>

<!-- Campo para mensaje -->
<textarea id="message" placeholder="Escribe aquí un mensajito antes de enviar.." rows="3"></textarea><br>

<button id="finishBtn" onclick="finishBouquet()">Terminado ✅</button>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  const firebaseConfig = {
  apiKey: "AIzaSyCVHFuci2pXuuO0HQJGnPtS4GaGuG8LH14",
  authDomain: "ramo-virtual.firebaseapp.com",
  databaseURL: "https://ramo-virtual-default-rtdb.firebaseio.com",
  projectId: "ramo-virtual",
  storageBucket: "ramo-virtual.firebasestorage.app",
  messagingSenderId: "978725161764",
  appId: "1:978725161764:web:0ad4ad5591616582dd41b1",
  measurementId: "G-XZ7STZKRP6"
};
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  let totalFlowers = 0;
  let bouquetArr = [];

  function addFlower(flower) {
    const bouquet = document.getElementById('bouquet');
    const span = document.createElement('span');
    span.className = 'flower';
    span.innerText = flower;

    const removeBtn = document.createElement('span');
    removeBtn.className = 'remove';
    removeBtn.innerText = 'x';
    removeBtn.onclick = () => {
      bouquet.removeChild(span);
      totalFlowers--;
      bouquetArr.splice(bouquetArr.indexOf(flower), 1);
      updateCount();
    }

    span.appendChild(removeBtn);
    bouquet.appendChild(span);

    totalFlowers++;
    bouquetArr.push(flower);
    updateCount();
  }

  function updateCount() {
    document.getElementById('count').innerText = `Total de flores: ${totalFlowers}`;
  }

  function finishBouquet() {
    if(totalFlowers === 0){
      alert("Por favor agrega algunas flores antes de terminar 🌸");
      return;
    }
    const messageText = document.getElementById('message').value;

    // Guardar en Firebase
    const bouquetRef = db.ref('bouquets');
    const newBouquet = bouquetRef.push();
    newBouquet.set({
      flowers: bouquetArr,
      message: messageText || "",
      timestamp: Date.now()
    });

    alert("enviado 🌸");

    // Reiniciar
    document.getElementById('bouquet').innerHTML = '';
    document.getElementById('message').value = '';
    totalFlowers = 0;
    bouquetArr = [];
    updateCount();
  }
</script>

</body>
</html>
